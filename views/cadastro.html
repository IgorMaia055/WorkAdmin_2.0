<!doctype html>
<html lang="pt-br" data-bs-theme="auto">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - WorkAdmin</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/checkout/">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }
      .bd-mode-toggle {
        z-index: 1500;
      }
      .olho {
  left: 90%;
  top: 1.3rem;
  position: absolute;
}
    </style>
    
    <!-- Custom styles for this template -->
    <link href="../site/css/checkout.css" rel="stylesheet">
  </head>
  <body class="bg-body-tertiary">

<div class="container">
  <main>
    <div class="py-5 text-center">
      <img class="d-block mx-auto mb-4" src="../site/img/workadmin.jpg" alt="" width="100" height="100">
      <h2>Cadastro WorkAdmin</h2>
      <p class="lead">Abaixo você preencherá um formulário necessário para que saibamos quem você é e possamos criar uma conta WorkAdmin, ao finalizar o cadastro você será redirecionado para WorkAdmin e poderá começar a utilizar por <strong>30 dias grátis</strong>.</p>
      <marquee behavior="" direction="">Se cadastre para testar o WorkAdmin por <mark>30 dias grátis</mark>, depois que fizer o teste e gostar, basta escolher um plano e aproveitar o WorkAdmin.</marquee>
      <br><br>
      <!-- modal 1 -->
      <button type="button" class="btn btn-primary" id="seCadastrar" data-bs-toggle="modal" data-bs-target="#modal1">
        Se cadastrar
      </button>
    </div>

<!-- Modal 1 -->
<div class="modal fade" id="modal1" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">1 de 4</h1>
      </div>
      <div class="modal-body">

        <div class="row g-3">
          <div class="col-12">
            <label for="nome" class="form-label">Nome completo</label>
            <input type="text" class="form-control" id="nome" required>
            <div class="invalid-feedback">
              Nome válido é obrigatório.
            </div>
          </div>

          <div class="col-12">
            <label for="nome_empresa" class="form-label">Nome da empresa</label>
            <input type="text" class="form-control" onkeyup="buscaNomeEmpresa()" id="nome_empresa" required>
            <div class="invalid-feedback">
              Esse nome já esta sendo usado.
            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="modal1BTN" data-bs-toggle="modal" data-bs-target="#modal2" hidden>Próximo</button>

      <script>
        setInterval(() => {
          let nome = document.querySelector('#nome')
          let nome_empresa = document.querySelector('#nome_empresa')
          if(nome.value.length > 0 && nome_empresa.value.length > 0){
            document.getElementById('modal1BTN').hidden = false
          }else{
            document.getElementById('modal1BTN').hidden = true
          }
        }, 1000);
      </script>
      </div>
    </div>
  </div>
</div>
<!-- fim modal1 -->

<!-- Modal 2 -->
<div class="modal fade" id="modal2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">2 de 4</h1>
      </div>
      <div class="modal-body">

        <div class="row g-3">
          <div class="col-12">
            <label for="endereco" class="form-label">Endereço</label>
            <input type="text" class="form-control" id="endereco" placeholder="R. Jardim Alegre, 586" required>
            <div class="invalid-feedback">
              Por favor informe seu endereço para continuar.
            </div>
          </div>

          <div class="col-md-4">
            <label for="pais" class="form-label">País</label>
            <select class="form-select" id="pais" required>
              <option value="">Selecione...</option>
              <option>Brasil</option>
            </select>
            <div class="invalid-feedback">
              O País é necessário.
            </div>
          </div>

          <div class="col-md-4">
            <label for="estado" class="form-label">Estado</label>
            <select class="form-select" id="estado" required>
              <option value="">Selecione...</option>
            </select>
            <div class="invalid-feedback">
              Selecione o seu estado.
            </div>
          </div>

          <div class="col-md-4">
            <label for="cep" class="form-label">CEP</label>
            <input type="text" class="form-control" placeholder="00000-000" id="cep" required>
            <div class="invalid-feedback">
              Selecione o seu CEP para continuar.
            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal3" id="modal3BTN" hidden>Próximo</button>

      <script>
        setInterval(() => {
          let endereco = document.querySelector('#endereco')
          let pais = document.querySelector('#pais')
          let estado = document.querySelector('#estado')
          let cep = document.querySelector('#cep')

          if(endereco.value.length > 0 && pais.value.length > 0 && estado.value.length > 0 && cep.value.length > 0){
            document.getElementById('modal3BTN').hidden = false
          }else{
            document.getElementById('modal3BTN').hidden = true
          }

        }, 1000);
      </script>

      </div>
    </div>
  </div>
</div>
<!-- fim modal 2 -->

<!-- Modal 3 -->
<div class="modal fade" id="modal3" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">3 de 4</h1>
      </div>
      <div class="modal-body">

        
      <div class="col-sm-12">
        <label for="email" class="form-label">Email</label>
        <div class="input-group mb-3">
          <span class="input-group-text" id="basic-addon1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-at" viewBox="0 0 16 16">
            <path d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2H2Zm3.708 6.208L1 11.105V5.383l4.708 2.825ZM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2-7-4.2Z"/>
            <path d="M14.247 14.269c1.01 0 1.587-.857 1.587-2.025v-.21C15.834 10.43 14.64 9 12.52 9h-.035C10.42 9 9 10.36 9 12.432v.214C9 14.82 10.438 16 12.358 16h.044c.594 0 1.018-.074 1.237-.175v-.73c-.245.11-.673.18-1.18.18h-.044c-1.334 0-2.571-.788-2.571-2.655v-.157c0-1.657 1.058-2.724 2.64-2.724h.04c1.535 0 2.484 1.05 2.484 2.326v.118c0 .975-.324 1.39-.639 1.39-.232 0-.41-.148-.41-.42v-2.19h-.906v.569h-.03c-.084-.298-.368-.63-.954-.63-.778 0-1.259.555-1.259 1.4v.528c0 .892.49 1.434 1.26 1.434.471 0 .896-.227 1.014-.643h.043c.118.42.617.648 1.12.648Zm-2.453-1.588v-.227c0-.546.227-.791.573-.791.297 0 .572.192.572.708v.367c0 .573-.253.744-.564.744-.354 0-.581-.215-.581-.8Z"/>
          </svg></span>
          <input type="email" class="form-control" id="email" required>
        </div>
        <div class="invalid-feedback">
          Esse Email está incorreto.
        </div>
        <button class="btn btn-outline-success" onclick="confirmEmail()">Confirmar Email</button>
      </div>
      <br>
      <div class="col-sm-12" id="codeEmailDiv" hidden>
        <label for="codeEmail" class="form-label">Código de verificação enviado para o seu email</label>
        <div class="input-group mb-3">
          <span class="input-group-text" id="basic-addon1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-dots" viewBox="0 0 16 16">
            <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
            <path d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
          </svg></span>
          <input type="number" class="form-control" id="codeEmail" value="" placeholder="Informe o código do email aqui" required>
        </div>
      </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="modal4BTN" data-bs-toggle="modal" data-bs-target="#modal4" hidden>Continuar</button>

      <script>
        let envio2
        setInterval(() => {
          let email = document.querySelector('#email')
          let codeEmail = document.getElementById('codeEmail')
          if(email.value.length > 0){
            if(codeEmail.value == envio2){
              document.getElementById('modal4BTN').hidden = false
              codeEmail.classList = 'form-control'
            }else{
              document.getElementById('modal4BTN').hidden = true
            }
            if(codeEmail.value.length != 0 && codeEmail.value != envio2){
              codeEmail.classList += ' is-invalid'
            }
          }
        }, 1000);

        function confirmEmail(){
          let email = document.querySelector('#email')
          let codeEmail = document.getElementById('codeEmailDiv')
          let nome_Empresa = document.getElementById('nome_empresa_final')
          let envio = "{{ enviar('<igormaia055@gmail.com>') }}"
          envio2 = envio 
          if(email.value.length > 0 && envio2 != ''){
            codeEmail.hidden = false
          }
          if(envio2 == 'erro'){
            email.classList += ' is-invalid'
          }else{
            email.classList = 'form-control'
          }
          console.log(envio2)
        }

      </script>
      </div>
    </div>
  </div>
</div>
<!-- fim modal3 -->

<!-- Modal 4 -->
<div class="modal fade" id="modal4" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">4 de 4</h1>
      </div>
      <div class="modal-body">

        <div class="col-12">
          <label for="tipo_empresa" class="form-label">Tipo de empresa</label>
          <select class="form-select" id="tipo_empresa" required>
            <option value="">Selecione...</option>
            <option>Funilaria e Pintura</option>
          </select>
          <div class="invalid-feedback">
            Selecione o tipo da sua empresa.
          </div>
        </div>

        <p>Não achou o tipo da sua empresa? <a href="{{ url('novo/tipo') }}">Enviar novo tipo de empresa</a></p><br>

        <div class="form-floating">
          <input type="password" class="form-control senha_conta" id="senha" placeholder="Crie uma senha">
          <label for="floatingPassword">Criar senha</label>
          <img src="https://img.icons8.com/fluency-systems-regular/20/000000/visible.png" class="olho" id="olho"/>
          <div class="invalid-feedback">
            Sua senha deve ter no mínimo 8 caracteres.
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="modal5BTN" data-bs-dismiss="modal" onclick="finalizarCad()" hidden>Concluir</button>

      <script>
        function finalizarCad(){
          document.getElementById('seCadastrar').hidden = true
          document.getElementById('finalizar').hidden = false
        }
        setInterval(() => {
          let tipo_empresa = document.querySelector('#tipo_empresa')
          let senha = document.getElementById('senha')
          if(tipo_empresa.value.length > 0 && senha.value.length >= 8){
            document.getElementById('modal5BTN').hidden = false
          }
          if(senha.value.length < 8 && senha.value.length > 0){
            document.querySelector('.senha_conta').classList += ' is-invalid'
          }else{
            document.querySelector('.senha_conta').classList = 'form-control senha_conta'
          }
        }, 1000);

        document.getElementById('olho').addEventListener('mousedown', function() {
    document.getElementById('senha').type = 'text';
  });
  
  document.getElementById('olho').addEventListener('mouseup', function() {
    document.getElementById('senha').type = 'password';
  });
  
  // Para que o password não fique exposto apos mover a imagem.
  document.getElementById('olho').addEventListener('mousemove', function() {
    document.getElementById('senha').type = 'password';
  });
      </script>
      </div>
    </div>
  </div>
</div>
<!-- fim modal4 -->

    <div class="row g-5">
      <div class="col-md-12">
        <form action="{{ url('goCadastro/') }}" novalidate>
          
          <input type="text" name="nome" id="nome_final" hidden>
          <input type="text" name="nome_empresa" id="nome_empresa_final" hidden>
          <input type="text" name="endereco" id="endereco_final" hidden>
          <input type="text" name="pais" id="pais_final" hidden>
          <input type="text" name="estado" id="estado_final" hidden>
          <input type="text" name="cep" id="cep_final" hidden>
          <input type="text" name="tipo_empresa" id="tipo_empresa_final" hidden>
          <input type="text" name="email" id="email_final" hidden>
          <input type="text" name="codeEmail" id="codeEmail_final" hidden>
          <input type="text" name="senha" id="senha_final" hidden>

          <script>
            setInterval(() => {
              valuesGO()
            }, 1000);
            function valuesGO(){
              $("#nome_final").val($("#nome").val())
              $("#nome_empresa_final").val($("#nome_empresa").val())
              $("#endereco_final").val($("#endereco").val())
              $("#pais_final").val($("#pais").val())
              $("#estado_final").val($("#estado").val())
              $("#cep_final").val($("#cep").val())
              $("#tipo_empresa_final").val($("#tipo_empresa").val())
              $("#email_final").val($("#email").val())
              $("#codeEmail_final").val($("#codeEmail").val())
              $("#senha_final").val($("#senha").val())
            }
          </script>

          </div>

          <button class="w-100 btn btn-primary btn-lg" type="submit" id="finalizar" hidden>Finalizar</button>
        </form>
      </div>
    </div>
  </main>

  <footer class="my-5 pt-5 text-body-secondary text-center text-small">
    <p class="mb-1">&copy; 2023–2024 Zambiank Tecnologias</p>
    <ul class="list-inline">
      <li class="list-inline-item"><a href="#">Privacidade</a></li>
      <li class="list-inline-item"><a href="#">Termos</a></li>
      <li class="list-inline-item"><a href="#">Suporte</a></li>
    </ul>
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <script src="../site/js/checkout.js"></script>

    <script>
    $(document).ready(function (){
              ({
                  url: "http://www.geonames.org/childrenJSON?geonameId=3469034",
                  method: 'POST',
                  success: function (data) {
                    for(let i=0; i < data.geonames.length; i++){
                      $('#estado').append('<option value="'+ data.geonames[i].name +'">' + data.geonames[i].name + '</option>')
                    }
                  }
              })
      
            })

            function buscaNomeEmpresa(){
              $(document).ready(function (){
              ({
                  url: "{{ url('busca_nome_empresa/') }}",
                  method: 'POST',
                  data: {
                    'nome_empresa': document.getElementById('nome_empresa').value
                  },
                  success: function (data) {
                    console.log(data)
                    if(data){
                      document.getElementById('nome_empresa').classList += ' is-invalid'
                    }else{
                      document.getElementById('nome_empresa').classList = 'form-control'
                    }
                  }
              })
              })
            }
    </script>
  </body>
</html>